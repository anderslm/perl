# Copyright 2009 Kim HÃ¸jgaard-Hansen <kimrhh@exherbo.org>
# Distributed under the terms of the GNU General Public License v2

require perl-module [ module_author=RHANDOM ]

SUMMARY="Extensible, general Perl server engine"

SLOT="0"
PLATFORMS="~x86"

DEFAULT_SRC_PREPARE_PATCHES=( "${FILES}"/${PNV}-fix-sydbox-violations.patch );

src_test() {
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20100"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20101"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20102"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20200"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20300"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20400"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20500"
    sydboxcmd "net/whitelist/connect/inet://127.0.0.1@20501"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20100"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20101"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20102"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20200"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20300"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20400"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20500"
    sydboxcmd "net/whitelist/bind/inet://127.0.0.1@20501"
    default
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20100"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20101"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20102"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20200"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20300"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20400"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20500"
    sydboxcmd "net/unwhitelist/connect/inet://127.0.0.1@20501"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20100"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20101"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20102"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20200"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20300"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20400"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20500"
    sydboxcmd "net/unwhitelist/bind/inet://127.0.0.1@20501"
}
